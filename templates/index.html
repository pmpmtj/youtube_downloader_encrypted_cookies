{% extends 'base.html' %}

{% block title %}Download Audio - YouTube Downloader{% endblock %}

{% block content %}
<h1>Download YouTube Audio</h1>

<div class="alert alert-success">
    <strong>Welcome, {{ user.email }}!</strong> You can now download audio from YouTube videos.
</div>

<form method="post" id="downloadForm">
    {% csrf_token %}
    <div class="form-group">
        <input type="url" name="url" placeholder="Paste YouTube URLâ€¦" required class="form-control" />
    </div>
    
    <div class="form-group">
        <div class="checkbox-container">
            <label class="checkbox-label">
                <input type="checkbox" name="download_to_remote" id="downloadToggle" checked>
                Download to my computer
            </label>
            <small class="text-muted">Uncheck to save to server only</small>
        </div>
    </div>
    
    <button type="submit" class="btn btn-block">Download Audio</button>
</form>

<small class="text-muted" id="downloadDescription">The best available audio (prefers .m4a) will download directly to your computer.</small>

<div class="mt-4">
    <a href="{% url 'accounts:dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const checkbox = document.getElementById('downloadToggle');
    const description = document.getElementById('downloadDescription');
    
    function updateDescription() {
        if (checkbox.checked) {
            description.textContent = 'The best available audio (prefers .m4a) will download directly to your computer.';
        } else {
            description.textContent = 'The best available audio (prefers .m4a) will be saved to the server only.';
        }
    }
    
    checkbox.addEventListener('change', updateDescription);
    
    // Initialize description on page load
    updateDescription();
});
</script>
{% endblock %}
